---
title: 使用bind提供域名解析
date: 2020-11-21
categories:
  - Linux
tags:
  - Linux
---

## DNS

DNS（Domain Name System，域名系统）技术应运而生。这是一项用于管理和解析域名与 IP 地址对应关系的技术，简单来说，就是能够接受用户输入的域名或 IP 地址，然后自动查找与之匹配（或者说具有映射关系）的 IP 地址或域名，即将域名解析为 IP 地址（正向解析），或将 IP 地址解析为域名（反向解析）。这样一来，我们只需要在浏览器中输入域名就能打开想要访问的网站了。DNS 域名解析技术的正向解析也是我们最常使用的一种工作模式。

鉴于互联网中的域名和 IP 地址对应关系数据库太过庞大，DNS 域名解析服务采用了类似目录树的层次结构来记录域名与 IP 地址之间的对应关系，从而形成了一个分布式的数据库系统，如图 13-1 所示。

![alt](.\picture\域名解析1.jpg)

图 13-1 DNS 域名解析服务采用的目录树层次结构

**主服务器**：在特定区域内具有唯一性，负责维护该区域内的域名与 IP 地址之间的对应关系。

**从服务器**：从主服务器中获得域名与 IP 地址的对应关系并进行维护，以防主服务器宕机等情况。

**缓存服务器**：通过向其他域名解析服务器查询获得域名与 IP 地址的对应关系，并将经常查询的域名信息保存到服务器本地，以此来提高重复查询时的效率。

![alt](.\picture\DNS查询流程图.jpg)

图 13-2 向 DNS 服务器发起域名查询请求的流程

## Bind

BIND（Berkeley Internet Name Domain，伯克利因特网名称域）服务是全球范围内使用最广泛、最安全可靠且高效的域名解析服务程序。

安装 Bind

```
yum install bind-chroot
```

Bind 三个关键文件

**主配置文件（/etc/named.conf）**：只有 58 行，而且在去除注释信息和空行之后，实际有效的参数仅有 30 行左右，_这些参数用来定义 bind 服务程序的运行。_

**区域配置文件（/etc/named.rfc1912.zones）**：*用来保存域名和 IP 地址对应关系的所在位置。*类似于图书的目录，对应着每个域和相应 IP 地址所在的具体位置，当需要查看或修改时，可根据这个位置找到相关文件。

**数据配置文件目录（/var/named）**：_该目录用来保存域名和 IP 地址真实对应关系的数据配置文件。_

修改 Bind 主配置文件

```
vim /etc/named.conf
```

![alt](.\picture\域名解析2.png)

在 Linux 系统中，bind 服务程序的名称为 named。首先需要在/etc 目录中找到该服务程序的主配置文件，然后把

**第 11 行的地址修改为 any 表示服务器上的所有 IP 地址均可提供 DNS 域名解析服务**

**第 17 行的地址修改为 any，表示允许所有人对本服务器发送 DNS 查询请求。**
